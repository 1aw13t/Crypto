import time
import sys
import random

with open("top_secret", "rb") as f:
	ct=f.read().rstrip('\n')

timelen=18
msglen=len(ct)-timelen

list88=[chr(0x88)] * len(ct)
ctime="".join([chr(ord(m) ^ ord(k)) for (m,k) in zip(ct,list88)][-18:])
ctime=float(ctime)
random.seed(ctime)
#successfully generated the key
key = [random.randrange(256) for _ in range(msglen)]
print ("The ctime is :",ctime)

print ("The key is :"+str(key))
#to generate the msg
list89=[0x88] * timelen
m=ct[:-18]

msg = [chr((ord(m) ^ k)%126) for (m,k) in zip(ct,key + list89)]

print (msg,ctime)

